

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GitHub Actions &mdash; MyDocs 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      <script>mermaid.initialize({"startOnLoad": true})</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Docker" href="docker.html" />
    <link rel="prev" title="Welcome" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MyDocs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">GitHub Actions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#components-of-github-actions">Components of GitHub Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#workflow-yaml-file">Workflow YAML file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-variables">Using Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-scripts-and-shell-commands">Using Scripts and Shell Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sharing-data-between-jobs">Sharing Data Between Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow-triggers-events">Workflow Triggers - Events</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#actions-files">Actions Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-actions">Adding Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#action-release-management">Action Release Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#action-inputs-and-outputs">Action Inputs and Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#action-file-fields">Action File Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-scripts">Running Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#expressions">Expressions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#literals">Literals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operators">Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#contexts">Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variables">Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#single-workflow-variables">Single Workflow Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-variables-across-multiple-workflows">Configuration Variables across multiple workflows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example-commenting-on-pr">Example Commenting on PR</a></li>
<li class="toctree-l2"><a class="reference internal" href="#github-actions-security">GitHub Actions Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="#triggering-actions-in-another-repo">Triggering Actions in another Repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calling-reusable-workflow">Calling Reusable Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#job-flow-control">Job flow control</a></li>
<li class="toctree-l2"><a class="reference internal" href="#workflow-inputs">Workflow inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#if-else">If-Else</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-github-actions-step-output">Setting Github Actions step output</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-to-github-actions-output-from-python">Writing to Github Actions Output from python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debugging-in-github-actions">Debugging in Github Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#evaluation-of-inputs">Evaluation of inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#matrix-jobs">Matrix Jobs:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#format-for-json-inputs">Format for Json inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sources">Sources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytest.html">PyTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="yocto.html">Yocto</a></li>
<li class="toctree-l1"><a class="reference internal" href="uboot.html">U-Boot</a></li>
<li class="toctree-l1"><a class="reference internal" href="systemd.html">SystemD</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">üêç Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux_commands.html">Linux Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="ssh.html">SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="bash.html">Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="jinja.html">ü•∑ Jinja</a></li>
<li class="toctree-l1"><a class="reference internal" href="mermaid.html">üßú‚Äç‚ôÄÔ∏è Mermaid</a></li>
<li class="toctree-l1"><a class="reference internal" href="rust.html">Rust</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MyDocs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">GitHub Actions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/github_actions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="github-actions">
<h1>GitHub Actions<a class="headerlink" href="#github-actions" title="Link to this heading">ÔÉÅ</a></h1>
<p>GitHub Actions is an automation tool that allows developers to automate their workflows, build,
test, and deploy their code directly from their GitHub repository.</p>
<hr class="docutils" />
<section id="components-of-github-actions">
<h2>Components of GitHub Actions<a class="headerlink" href="#components-of-github-actions" title="Link to this heading">ÔÉÅ</a></h2>
<p>A GitHub Actions <em>workflow</em> can be triggered when an <em>event</em> occurs in your repository. A workflow
contains one or more <em>jobs</em> which can be run sequentially or in parallel. Each job runs inside a
<em>runner</em> (VM or container), and has one or more <em>steps</em> that either runs a script or an <em>action</em>.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Workflow:</dt><dd><ul>
<li><p>Configurable automated process</p></li>
<li><p>Defined by <em>yaml</em> file</p></li>
<li><p>Triggered by event, manually or on defined schedule</p></li>
<li><p>Defined in <code class="docutils literal notranslate"><span class="pre">.github/workflows</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Events:</dt><dd><ul>
<li><p>GitHub activity that triggers workflow e.g. pull request, push to branch, issue opening</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Jobs:</dt><dd><ul>
<li><p>A set of steps that will be executed on the same runner</p></li>
<li><p>You can share data between steps in the same job</p></li>
<li><p>Jobs run in parallel, but can be configured to be dependent on each other</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Actions:</dt><dd><ul>
<li><p>Custom application that does a frequently repeated task</p></li>
<li><p>You can write your own, or find them on GitHub Marketplace</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Runners:</dt><dd><ul>
<li><p>Server that executes a job</p></li>
<li><p>This can be a GitHub provided VM or you can host your own runner</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="workflow-yaml-file">
<h2>Workflow YAML file<a class="headerlink" href="#workflow-yaml-file" title="Link to this heading">ÔÉÅ</a></h2>
<ul>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">name</span><span class="p">:</span></code>: The name of the workflow that appears in the ‚ÄúActions‚Äù tab in GitHub</p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">run-name</span><span class="p">:</span></code>: The name of the workflow run that will appear on GitHub</p>
<blockquote>
<div><p>This can be customised by incrementing a number or showing the username of the person that
triggered the action e.g. <code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">run-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ github.actor }} workflow run</span></code></p>
</div></blockquote>
</li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">on</span><span class="p">:</span></code>: Specifies the trigger(s) for the workflow</p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">jobs</span><span class="p">:</span></code>: Groups together jobs that run in the workflow</p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">runs-on</span><span class="p">:</span></code>: Specifies where the job will be run</p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">steps</span><span class="p">:</span></code>: Lists the steps for the job</p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">uses</span><span class="p">:</span></code>: Specifies the pre-defined action that a step will use</p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">run</span><span class="p">:</span></code>: Tells the job to execute a command on the runner</p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">needs</span><span class="p">:</span></code>: Used when a job needs to wait for another job to complete</p></li>
</ul>
<section id="using-variables">
<h3>Using Variables<a class="headerlink" href="#using-variables" title="Link to this heading">ÔÉÅ</a></h3>
<p>You can add custom variables to your worflow YAML file. In the example the variables will be
available to the given script.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_script.scr</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="nt">MY_VAR_1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">53</span>
<span class="w">        </span><span class="nt">MY_VAR_2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello</span>
</pre></div>
</div>
</section>
<section id="using-scripts-and-shell-commands">
<h3>Using Scripts and Shell Commands<a class="headerlink" href="#using-scripts-and-shell-commands" title="Link to this heading">ÔÉÅ</a></h3>
<p>You can either run just a single command, or a script from your local repo, provided with a shell type</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm install -g bats</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run script</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./.github/scripts/build.sh</span>
<span class="w">      </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
</pre></div>
</div>
</section>
<section id="sharing-data-between-jobs">
<h3>Sharing Data Between Jobs<a class="headerlink" href="#sharing-data-between-jobs" title="Link to this heading">ÔÉÅ</a></h3>
<p>If you want to share files between jobs, or just save them for later reference,
you can save them as artifacts.</p>
<ul class="simple">
<li><p>Creating an artifact:</p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">example-job</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Save output</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">expr 1 + 1 &gt; output.log</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload output file</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v3</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output-log-file</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output.log</span>
<span class="w">        </span><span class="nt">if-no-files-found</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">error</span>
<span class="w">        </span><span class="nt">retention-days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Downloading an artifact</p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">example-job</span><span class="p">:</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Download a single artifact</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/download-artifact@v3</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output-log-file</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ github.workspace }}/output-log-file</span>
</pre></div>
</div>
</section>
<section id="workflow-triggers-events">
<h3>Workflow Triggers - Events<a class="headerlink" href="#workflow-triggers-events" title="Link to this heading">ÔÉÅ</a></h3>
<ul>
<li><p><cite>pull_reqest</cite></p>
<blockquote>
<div><ul class="simple">
<li><p>You can specify a branch/branches with <cite>branches:</cite></p></li>
<li><p>You can specify which particular file changes will trigger this with
<cite>paths:</cite>. You can use expressions here like <cite>‚Äú*,py‚Äù</cite> to trigger on a
change in a python file.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><cite>workflow_dispatch</cite>: Allows you to run the workflow manually from GitHub actions tab</p></li>
<li><p><cite>repository_dispatch</cite>: Allows you to trigger a workflow using a webhook.</p></li>
<li><p><cite>schedule</cite>: Can set it to run at specified times, e.g. using the <cite>cron</cite> tag</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Example Cron job</span><a class="headerlink" href="#id1" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">schedule</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cron</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0</span><span class="nv"> </span><span class="s">4</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*&quot;</span><span class="w"> </span><span class="c1"># run at 4am (UTC) every day</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li><p><cite>workflow_call</cite>: Uses Github‚Äôs reusable workflow model, workflow is called from another workflow.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="actions-files">
<h2>Actions Files<a class="headerlink" href="#actions-files" title="Link to this heading">ÔÉÅ</a></h2>
<dl class="simple">
<dt>The actions you use can be located in:</dt><dd><ul class="simple">
<li><p>The same repo as the worflow file</p></li>
<li><p>Any public repo</p></li>
<li><p>A published Docker container image on Docker GitHub</p></li>
</ul>
</dd>
</dl>
<p>See <a class="reference external" href="https://github.com/marketplace?type=actions">GitHub Marketplace</a> for some pre-defined actions.</p>
<section id="adding-actions">
<h3>Adding Actions<a class="headerlink" href="#adding-actions" title="Link to this heading">ÔÉÅ</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>From Marketplace:</dt><dd><ul>
<li><p>Copy the <em>uses</em> tag to your worflow e.g. <code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v3.1.2</span></code></p></li>
<li><p>The action may require you to provide inputs</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>From Same Repo:</dt><dd><ul>
<li><p>You can either use <code class="docutils literal notranslate"><span class="pre">{owner}/{repo}&#64;{ref}</span></code> or <code class="docutils literal notranslate"><span class="pre">./path/to/dir</span></code> syntax</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./.github/actions/hello-world-action</span>
</pre></div>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>From a Public Repo:</dt><dd><ul>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">{owner}/{repo}&#64;{ref}</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>A container from Docker Hub</dt><dd><ul>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">docker://{image}:{tag}</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="action-release-management">
<h3>Action Release Management<a class="headerlink" href="#action-release-management" title="Link to this heading">ÔÉÅ</a></h3>
<p>You should indicate the version of the action you‚Äôd like to use based on your comfort with accepting
automatic updates.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to use the SHA commit value when using third-party actions</p>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>Using tags</dt><dd><ul>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/javascript-action@v1.0.1</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Using SHA</dt><dd><ul>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/javascript-action@a824008085750b8e136effc585c3cd6082bd575f</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Using branches</dt><dd><ul>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/javascript-action@main</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="action-inputs-and-outputs">
<h3>Action Inputs and Outputs<a class="headerlink" href="#action-inputs-and-outputs" title="Link to this heading">ÔÉÅ</a></h3>
<p>To see the inputs and outputs of an action, check the <code class="docutils literal notranslate"><span class="pre">action.yml</span></code> in the root of the repo.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Example&quot;</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Receives</span><span class="nv"> </span><span class="s">file</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">generates</span><span class="nv"> </span><span class="s">output&quot;</span>
<span class="nt">inputs</span><span class="p">:</span>
<span class="nt">file-path</span><span class="p">:</span><span class="w"> </span><span class="c1"># id of input</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Path</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">test</span><span class="nv"> </span><span class="s">script&quot;</span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test-file.js&quot;</span>
<span class="nt">outputs</span><span class="p">:</span>
<span class="nt">results-file</span><span class="p">:</span><span class="w"> </span><span class="c1"># id of output</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Path</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">results</span><span class="nv"> </span><span class="s">file&quot;</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="action-file-fields">
<h3>Action File Fields<a class="headerlink" href="#action-file-fields" title="Link to this heading">ÔÉÅ</a></h3>
<p>See <a class="reference external" href="https://docs.github.com/en/actions/creating-actions/metadata-syntax-for-github-actions">Metadata Syntax for GitHub Actions</a>.</p>
<ul>
<li><p>name</p></li>
<li><p>author</p></li>
<li><p>description</p></li>
<li><p>inputs : see above section</p></li>
<li><p>outputs : see above section</p></li>
<li><dl>
<dt>runs<span class="classifier">Specifies how the action is executed</span></dt><dd><ul class="simple">
<li><p>runs composite actions:</p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">runs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;composite&quot;</span>
<span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Run</span><span class="nv"> </span><span class="s">Sphinx</span><span class="nv"> </span><span class="s">Build</span><span class="nv"> </span><span class="s">Script&quot;</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$GITHUB_ACTION_PATH/script.sh</span>
<span class="w">      </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
</pre></div>
</div>
<ul class="simple">
<li><p>runs Docker container:</p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">runs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;docker&#39;</span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Dockerfile&#39;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Be careful when your Dockerfile is not in the root of your repo since it cannot access
anything above it in the directory tree. If this is the case you will have to use script
to run docker from the root pointing at the Dockerfile further down the directory tree</p>
</div>
<ul class="simple">
<li><p>branding: Create an icon that is shown on GitHub marketplace</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="running-scripts">
<h2>Running Scripts<a class="headerlink" href="#running-scripts" title="Link to this heading">ÔÉÅ</a></h2>
<p>You can run scripts as part of your <code class="docutils literal notranslate"><span class="pre">composite</span> <span class="pre">steps</span></code> section of either a action file or workflow file.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;composite&quot;</span>
<span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Run</span><span class="nv"> </span><span class="s">Sphinx</span><span class="nv"> </span><span class="s">Build</span><span class="nv"> </span><span class="s">Script&quot;</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$GITHUB_ACTION_PATH/script.sh</span>
<span class="w">    </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">$GITHUB_ACTION_PATH</span></code> specifies the path to the action file it is running from.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Even if the script is started from a random place in the repo, it seems that the working
directory when the script starts is the root of the github repo.</p>
</div>
<p>If you want a script to run, you have to make sure it has it‚Äôs permission set to executable.
This executable status is included when you commit the file to GitHub.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>&lt;your_script.sh&gt;
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A script might still exit with a sucessfull exit code even if one of the commands returned an
error code. This could make your workflow seem like it succeeded. You can use the <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">-e</span></code> in
your script file to cause the script to exit with error on the first command that returns an error</p>
</div>
</section>
<hr class="docutils" />
<section id="expressions">
<h2>Expressions<a class="headerlink" href="#expressions" title="Link to this heading">ÔÉÅ</a></h2>
<p>Expressions are used to programmatically set environment variables.</p>
<p>You use special syntax to evaluate as an expression: <code class="docutils literal notranslate"><span class="pre">${{</span> <span class="pre">&lt;expression&gt;</span> <span class="pre">}}</span></code>.</p>
<p>If you use the expression within an <code class="docutils literal notranslate"><span class="pre">if</span></code> conditional, you can ommit the expression syntax above.</p>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading">ÔÉÅ</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/hello-world-javascript-action@e76147da8e5c81eaf017dede5645551d4b94427b</span>
<span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ &lt;expression&gt; }}</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">env</span><span class="p">:</span>
<span class="w">  </span><span class="nt">MY_ENV_VAR</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ &lt;expression&gt; }}</span>
</pre></div>
</div>
</section>
<section id="literals">
<h3>Literals<a class="headerlink" href="#literals" title="Link to this heading">ÔÉÅ</a></h3>
<p>You can use: boolean, null, number or string data types</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">env</span><span class="p">:</span>
<span class="w">  </span><span class="nt">myNull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ null }}</span>
<span class="w">  </span><span class="nt">myBoolean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ false }}</span>
<span class="w">  </span><span class="nt">myIntegerNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ 711 }}</span>
<span class="w">  </span><span class="nt">myFloatNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ -9.2 }}</span>
<span class="w">  </span><span class="nt">myHexNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ 0xff }}</span>
<span class="w">  </span><span class="nt">myExponentialNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ -2.99e-2 }}</span>
<span class="w">  </span><span class="nt">myString</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mona the Octocat</span>
<span class="w">  </span><span class="nt">myStringInBraces</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ &#39;It&#39;&#39;s open source!&#39; }}</span><span class="w"> </span><span class="c1"># note the &#39;&#39;, which is required to output It&#39;s</span>
</pre></div>
</div>
</section>
<section id="operators">
<h3>Operators<a class="headerlink" href="#operators" title="Link to this heading">ÔÉÅ</a></h3>
<ul class="simple">
<li><p>Logical operators: <code class="docutils literal notranslate"><span class="pre">||</span> <span class="pre">&amp;&amp;</span> <span class="pre">!</span> <span class="pre">!=</span> <span class="pre">==</span> <span class="pre">&lt;=</span> <span class="pre">&lt;</span> <span class="pre">&gt;</span> <span class="pre">&gt;=</span></code></p></li>
<li><p>Index: <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
<li><p>Logical grouping: <code class="docutils literal notranslate"><span class="pre">()</span></code></p></li>
<li><p>Property dereference: <code class="docutils literal notranslate"><span class="pre">.</span></code></p></li>
</ul>
<p>GitHub uses loose equality comparisons: If types don‚Äôt match, variable is cast to a number.</p>
<ul class="simple">
<li><p>NULL -&gt; <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><dl class="simple">
<dt>Boolean</dt><dd><ul>
<li><p>true -&gt; <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p>false -&gt; <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>String</dt><dd><ul>
<li><p>Empty string -&gt; <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p>Parsed from any legal JSON format, otherwise <code class="docutils literal notranslate"><span class="pre">NaN</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Array -&gt; <code class="docutils literal notranslate"><span class="pre">NaN</span></code></p></li>
<li><p>Object -&gt; <code class="docutils literal notranslate"><span class="pre">NaN</span></code></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A comparison of one <code class="docutils literal notranslate"><span class="pre">NaN</span></code> to another <code class="docutils literal notranslate"><span class="pre">NaN</span></code> doesn‚Äôt result in a <code class="docutils literal notranslate"><span class="pre">true</span></code></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>GitHub ignores case when comparing strings</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Objects and array are only considered equal when they are the same instance</p>
</div>
</section>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Link to this heading">ÔÉÅ</a></h3>
<p>GitHub provides some builtin functions. Some functions cast input to a string:</p>
<ul class="simple">
<li><p>NULL -&gt; <code class="docutils literal notranslate"><span class="pre">''</span></code></p></li>
<li><p>Boolean -&gt; <code class="docutils literal notranslate"><span class="pre">'true'</span></code> or <code class="docutils literal notranslate"><span class="pre">'false'</span></code></p></li>
<li><p>Number -&gt; decimal format</p></li>
<li><p>Array/Object: Not converted to a string</p></li>
</ul>
<p>Functions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">contains(</span> <span class="pre">search,</span> <span class="pre">item)</span></code>: does the string contain the given slice</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">startsWith(</span> <span class="pre">search,</span> <span class="pre">item)</span></code>: does the string start with the given slice</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">endsWith(</span> <span class="pre">search,</span> <span class="pre">item)</span></code>: does the string end with given slice</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format(</span> <span class="pre">string,</span> <span class="pre">replaceValue0...)</span></code>: Formats a string, variables inserted in <code class="docutils literal notranslate"><span class="pre">{N}`</span></code>, where N is an integer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">join(</span> <span class="pre">array,</span> <span class="pre">opetionalSeperator)</span></code>: concatenates elements into a string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">toJSON(</span> <span class="pre">value)</span></code>: prints JSON representation of a value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fromJSON(value)</span></code>: returns JSON data type for value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hashFiles(path)</span></code>: returns the hash for one or multiple files given by path</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">success()</span></code>: checks none of the previous steps have been cancelled or failed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">always()</span></code>: always executes, even if step is cancelled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cancelled()</span></code>: true if workflow is cancelled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">failure()</span></code>: returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if any previous step or ancestor job fails</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="contexts">
<h2>Contexts<a class="headerlink" href="#contexts" title="Link to this heading">ÔÉÅ</a></h2>
<p>Contexts are a way to access information about workflow runs, variables, runner environments, jobs, and steps.
Each context is an object that contains properties, which can be strings or other objects.</p>
<p>Examples of some context types include: <code class="docutils literal notranslate"><span class="pre">github,</span> <span class="pre">env,</span> <span class="pre">vars,</span> <span class="pre">job,</span> <span class="pre">steps,</span> <span class="pre">runner,</span> <span class="pre">secrets,</span> <span class="pre">needs</span></code>‚Ä¶</p>
<p>As part of an expression you can access context info in two ways:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">github['sha']</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">github.sha</span></code></p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Attempting to dereference a non-existent property evaluates to an empty string</p>
</div>
<p>You can print a context to the log if you want to see what is inside of them:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &#39;${{ toJSON(github) }}&#39;</span>
<span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &#39;${{ toJSON(steps) }}&#39;</span>
</pre></div>
</div>
<p>Contexts have many attributes so it is best to look <a class="reference external" href="https://docs.github.com/en/actions/learn-github-actions/contexts">here</a> for documentation.</p>
</section>
<hr class="docutils" />
<section id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Link to this heading">ÔÉÅ</a></h2>
<p>Variables provide a way to reuse non-sensitive configuration information.</p>
<p>You can set environment variables on a workflow level, in the workflow YAML file, or across multiple workflows at the organisation,
repository or environment level.</p>
<section id="single-workflow-variables">
<h3>Single Workflow Variables<a class="headerlink" href="#single-workflow-variables" title="Link to this heading">ÔÉÅ</a></h3>
<p>You can set workflow variables at three levels:</p>
<ol class="arabic simple">
<li><p>Workflow level</p></li>
<li><p>Job level</p></li>
<li><p>Step level</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can list all variables available at a particular step by using <code class="docutils literal notranslate"><span class="pre">run:</span> <span class="pre">env</span></code></p>
</div>
</section>
<section id="configuration-variables-across-multiple-workflows">
<h3>Configuration Variables across multiple workflows<a class="headerlink" href="#configuration-variables-across-multiple-workflows" title="Link to this heading">ÔÉÅ</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These are still in beta and subject to change</p>
</div>
<p>Configuration variables can be set at organisation, repository or environment level. Configuration variables are available in the <code class="docutils literal notranslate"><span class="pre">vars</span></code> context</p>
<p>If variables have the same name, the one with the lowest level takes precedence: organisation &lt; repository &lt; environment.</p>
<p>You can add configuration variables in the GitHub settings. This is same for secrets.</p>
</section>
</section>
<hr class="docutils" />
<section id="example-commenting-on-pr">
<h2>Example Commenting on PR<a class="headerlink" href="#example-commenting-on-pr" title="Link to this heading">ÔÉÅ</a></h2>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Adding PR to your workflow Events</span><a class="headerlink" href="#id2" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">on</span><span class="p">:</span>
<span class="nt">pull_request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">types</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">opened</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">synchronize</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">reopened</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</div>
<p>In the example, we see that this pull_request event is triggered when the PR is opened
and re-opened. Synchronize triggers the event when the PR is updated with a push.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Example step</span><a class="headerlink" href="#id3" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Update PR</span>
<span class="w">  </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ github.event_name == &#39;pull_request&#39; }}</span>
<span class="w">  </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/github-script@v6</span>
<span class="w">  </span><span class="nt">with</span><span class="p">:</span>
<span class="w">    </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">github.rest.issues.createComment({</span>
<span class="w">      </span><span class="no">issue_number: context.issue.number,</span>
<span class="w">      </span><span class="no">owner: context.repo.owner,</span>
<span class="w">      </span><span class="no">repo: context.repo.repo,</span>
<span class="w">      </span><span class="no">body: &#39;üëã Check the Sphinx build passed before merge!&#39;</span>
<span class="w">      </span><span class="no">})</span>
</pre></div>
</div>
</div>
<p>The step in the example uses the GitHub provided <code class="docutils literal notranslate"><span class="pre">github-script</span></code> action which is used for issues and PRs.
In GitHub, a PR is treated the same as an issue.</p>
<p>The step will only run if the triggering event is of type <code class="docutils literal notranslate"><span class="pre">pull_request</span></code>, which is extracted from the github
context.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The nice thing about this event type is that it will actually block the PR from being merged until
the workflow has completed successfully. This is done automatically.</p>
</div>
</section>
<section id="github-actions-security">
<h2>GitHub Actions Security<a class="headerlink" href="#github-actions-security" title="Link to this heading">ÔÉÅ</a></h2>
<p>Check out this link: <a class="reference external" href="https://docs.github.com/en/actions/security-guides/security-hardening-for-github-actions">https://docs.github.com/en/actions/security-guides/security-hardening-for-github-actions</a></p>
</section>
<hr class="docutils" />
<section id="triggering-actions-in-another-repo">
<h2>Triggering Actions in another Repo<a class="headerlink" href="#triggering-actions-in-another-repo" title="Link to this heading">ÔÉÅ</a></h2>
<p>You can use action files from another repo in your workflow.</p>
<p>If you are using your own action, it is recommended to have a separate repository for your
action.
However it is also possible to have your action within your repo with other things in it.</p>
<p>For example, an action file in <code class="docutils literal notranslate"><span class="pre">actions/my_action/action.yml</span></code></p>
<p>To call an action from another repo, you have to alter your repo settings to allow calls from
other repositories to access actions.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Example workflow calling action in another repo</span><a class="headerlink" href="#id4" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runs</span><span class="o">-</span><span class="n">on</span><span class="p">:</span> <span class="n">ubuntu</span><span class="o">-</span><span class="n">latest</span>
<span class="n">steps</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Test-action&quot;</span>
    <span class="n">uses</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">repository_owner</span><span class="o">&gt;/&lt;</span><span class="n">repository_name</span><span class="o">&gt;/</span><span class="n">actions</span><span class="o">/</span><span class="n">my_action</span><span class="o">@&lt;</span><span class="n">branch_name</span> <span class="ow">or</span> <span class="n">reference</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Example action.yml</span><a class="headerlink" href="#id5" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>using: &quot;composite&quot;
steps:
    - run: |
        python ${{ github.action_path }}/../my_script.py
      shell: bash
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As seen in the example, you need to use the <code class="docutils literal notranslate"><span class="pre">github.action_path</span></code> to reference files
in relation to the actions file.</p>
</div>
<p>Doing it this way even allows you to call actions in the same repository you are in.
The other method you can use, is to first checkout the repository containing the action
you want to run, and then call the action locally:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Example calling action locally</span><a class="headerlink" href="#id6" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span><span class="w"> </span><span class="c1"># need to checkout repo first in this case</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./.github/&lt;action_name&gt;</span>
</pre></div>
</div>
</div>
<p>In this case the action version is determined by the reference you use to checkout the
repository containing the action.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In theory you can have an action.yml anywhere in your repo, not just in the .github/actions.
It makes more sense as a public action repo to have the action in the repo root.</p>
</div>
</section>
<hr class="docutils" />
<section id="calling-reusable-workflow">
<h2>Calling Reusable Workflow<a class="headerlink" href="#calling-reusable-workflow" title="Link to this heading">ÔÉÅ</a></h2>
<p>You can call a workflow both in the same repo or in another repo.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Example calling reusable workflow</span><a class="headerlink" href="#id7" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;org&gt;/&lt;repo_name&gt;/.github/workflows/my_workflow.yml@main</span>
<span class="c1"># OR</span>
<span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./.github/workflows/my_workflow.yml</span>
</pre></div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="job-flow-control">
<h2>Job flow control<a class="headerlink" href="#job-flow-control" title="Link to this heading">ÔÉÅ</a></h2>
<p>Here is an example of some job control flow. You can use the <code class="docutils literal notranslate"><span class="pre">needs</span></code> keyword to
achieve this.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Example of job flow control</span><a class="headerlink" href="#id8" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">jobs</span><span class="p">:</span>
<span class="w">    </span><span class="nt">job1</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>

<span class="w">    </span><span class="nt">job2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">job1</span>
<span class="w">        </span><span class="c1"># note not in ${{ }}</span>
<span class="w">        </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">            </span><span class="no">always() &amp;&amp;</span>
<span class="w">            </span><span class="no">( needs.job1.result != &#39;skipped&#39; )</span>
</pre></div>
</div>
</div>
<p>The use of <code class="docutils literal notranslate"><span class="pre">always</span></code> means that this job will still be evaluated even if the previous
dependent job is failed or cancelled or skipped.</p>
</section>
<hr class="docutils" />
<section id="workflow-inputs">
<h2>Workflow inputs<a class="headerlink" href="#workflow-inputs" title="Link to this heading">ÔÉÅ</a></h2>
<p>Undefined workflow inputs are treated as empty strings.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Example with undefined workflow input</span><a class="headerlink" href="#id9" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">on</span><span class="p">:</span>
<span class="w">    </span><span class="nt">workflow_dispatch</span><span class="p">:</span>

<span class="w">    </span><span class="nt">workflow_call</span><span class="p">:</span>
<span class="w">        </span><span class="nt">my_input</span><span class="p">:</span>
<span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">            </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span>

<span class="c1"># Later on if you call inputs.my_input, if called from workflow_call it will be the input boolean,</span>
<span class="c1"># if from workflow_dispatch (i.e. undefined), it will be an empty string &#39;&#39;</span>
</pre></div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="if-else">
<h2>If-Else<a class="headerlink" href="#if-else" title="Link to this heading">ÔÉÅ</a></h2>
<p>Github actions has a shorthand for doing <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">else</span></code> type statements.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Example if else</span><a class="headerlink" href="#id10" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">${{ inputs.use_local_image == &#39;true&#39; &amp;&amp; &#39;--use_local_image&#39; || &#39;&#39; }} \</span>
<span class="l l-Scalar l-Scalar-Plain">${{ inputs.image_tag &amp;&amp; format(&#39;--image_tag=&quot;{0}&quot;&#39;, inputs.image_tag) || &#39;&#39; }} \</span>
</pre></div>
</div>
</div>
<p>If the expression is evaluated to True, then the statement after the <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> will be used.
If the expression is evaluated to False, then the statement after the <code class="docutils literal notranslate"><span class="pre">||</span></code> will be used.</p>
</section>
<hr class="docutils" />
<section id="setting-github-actions-step-output">
<h2>Setting Github Actions step output<a class="headerlink" href="#setting-github-actions-step-output" title="Link to this heading">ÔÉÅ</a></h2>
<p>To do this you simply write to the <code class="docutils literal notranslate"><span class="pre">GITHUB_OUTPUT</span></code> environment file.
To access the output from a step, you need to assign the step an <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Example setting Github Actions Step output</span><a class="headerlink" href="#id11" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">    </span><span class="nt">number-of-days</span><span class="p">:</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">days</span><span class="nv"> </span><span class="s">since</span><span class="nv"> </span><span class="s">unix</span><span class="nv"> </span><span class="s">epoch</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">UTC&quot;</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.get-days.outputs.days }}</span>

<span class="nt">runs</span><span class="p">:</span>
<span class="w">    </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;composite&quot;</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get-days</span>
<span class="w">          </span><span class="c1"># -u gives UTC, +%s gives value in seconds, / 86400 converts seconds to days</span>
<span class="w">          </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &quot;days=$(( $(date -u +%s) / 86400 ))&quot; &gt;&gt; $GITHUB_OUTPUT</span>
<span class="w">          </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
</pre></div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="writing-to-github-actions-output-from-python">
<h2>Writing to Github Actions Output from python<a class="headerlink" href="#writing-to-github-actions-output-from-python" title="Link to this heading">ÔÉÅ</a></h2>
<p>Wrtiting to the Github Output like this will be the variable will be available
in the step.output for the action step calling the python script.</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Example writing to github actions output</span><a class="headerlink" href="#id12" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;GITHUB_OUTPUT&quot;</span><span class="p">],</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">var</span><span class="p">:</span>
    <span class="n">var</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;run_job_config=</span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">run_job_config</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">json.dumps</span></code> from a dictionary is a good way to get data in a nice format for using in Github Actions.</p>
</div>
</section>
<hr class="docutils" />
<section id="debugging-in-github-actions">
<h2>Debugging in Github Actions<a class="headerlink" href="#debugging-in-github-actions" title="Link to this heading">ÔÉÅ</a></h2>
<p>Sometimes it is nice to view a context in github actions for debugging. It is not possible to
simply echo. This method can be used for any json based github actions data.</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Example debugging in Github Actions</span><a class="headerlink" href="#id13" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Debug</span><span class="nv"> </span><span class="s">Job</span><span class="nv"> </span><span class="s">Output&quot;</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">echo &quot;OUTPUTS:&quot;</span>
<span class="w">    </span><span class="no">python -c &#39;import json; json_string=${{ toJson(steps.process-request.outputs.temporary_labels) }}; \</span>
<span class="w">      </span><span class="no">print(f&quot;temporary_labels = {json.dumps(json.loads(json_string), indent=2)}&quot;)&#39;</span>
</pre></div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="evaluation-of-inputs">
<h2>Evaluation of inputs<a class="headerlink" href="#evaluation-of-inputs" title="Link to this heading">ÔÉÅ</a></h2>
<p>Actions inputs are always strings!</p>
<p>If an input has a default of <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> , then you can do something like what follows in an <strong>Action‚Ä¶</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">python my_script.py ${{ inputs.marks &amp;&amp; format(&#39;--marks=&quot;{0}&quot;&#39;, inputs.marks) || &#39;&#39; }} \</span>
</pre></div>
</div>
<p>In a workflow, if you have an input as a boolean type, you can do the following in a step <code class="docutils literal notranslate"><span class="pre">if</span></code></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inputs.use_test_image</span>
<span class="c1"># if using a ! you should use ${{ }} since ! is something in yaml syntax</span>
</pre></div>
</div>
<p>you can also do this in a workflow step:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">python my_script.py ${{ inputs.use_test_image &amp;&amp; &#39;--image_name=test_image&#39; || &#39;&#39; }} \</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="matrix-jobs">
<h2>Matrix Jobs:<a class="headerlink" href="#matrix-jobs" title="Link to this heading">ÔÉÅ</a></h2>
<p>Matrix jobs allow you to run a dynamic number of jobs in parallel.</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Example setting up a matrix job</span><a class="headerlink" href="#id14" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">test-session</span><span class="p">:</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">setup-test-session</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">set-temp-labels</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">always() &amp;&amp;</span>
<span class="w">        </span><span class="no">((needs.setup-test-session.result == &#39;success&#39;)  &amp;&amp;</span>
<span class="w">        </span><span class="no">((needs.set-temp-labels.result == &#39;success&#39;) ||</span>
<span class="w">        </span><span class="no">(needs.set-temp-labels.result == &#39;skipped&#39;)))</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">        </span><span class="nt">fail-fast</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">        </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">            </span><span class="nt">test-run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ fromJson(needs.setup-test-session.outputs.run_job_config) }}</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">self-hosted</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;${{</span><span class="nv"> </span><span class="s">matrix.test-run.runner_label</span><span class="nv"> </span><span class="s">}}&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="format-for-json-inputs">
<h2>Format for Json inputs<a class="headerlink" href="#format-for-json-inputs" title="Link to this heading">ÔÉÅ</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">with</span><span class="p">:</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{&quot;&lt;runner_name&gt;&quot;:</span><span class="nv"> </span><span class="s">[&quot;&lt;label1&gt;&quot;]}&#39;</span>
</pre></div>
</div>
<p>This is how you can do json as an input. Note the use of ‚Äò and ‚Äú.
This is because you should pass json as a string within github actions, and use
the <code class="docutils literal notranslate"><span class="pre">toJson</span></code> and <code class="docutils literal notranslate"><span class="pre">fromJson</span></code> to do the conversions between strings and json.</p>
<p>From the Github UI, use: <code class="docutils literal notranslate"><span class="pre">{&quot;&lt;runner_name&gt;&quot;:</span> <span class="pre">[&quot;&lt;label1&gt;&quot;]}</span></code> without external ‚Äò or ‚Äú</p>
</section>
<hr class="docutils" />
<section id="sources">
<h2>Sources<a class="headerlink" href="#sources" title="Link to this heading">ÔÉÅ</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.github.com/en/actions/learn-github-actions">https://docs.github.com/en/actions/learn-github-actions</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="docker.html" class="btn btn-neutral float-right" title="Docker" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Mikkel Caschetto-Bottcher.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>