<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>🐍 Python &mdash; MyDocs 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=e031e9a9"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({"startOnLoad": true})</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Linux Commands" href="linux_commands.html" />
    <link rel="prev" title="SystemD" href="systemd.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MyDocs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="github_actions.html">GitHub Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytest.html">PyTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="yocto.html">Yocto</a></li>
<li class="toctree-l1"><a class="reference internal" href="uboot.html">U-Boot</a></li>
<li class="toctree-l1"><a class="reference internal" href="systemd.html">SystemD</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">🐍 Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lambda">Lambda</a></li>
<li class="toctree-l2"><a class="reference internal" href="#map">Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filter">Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#set">Set</a></li>
<li class="toctree-l2"><a class="reference internal" href="#string-formatting">String formatting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#checking-for-a-type">Checking for a type</a></li>
<li class="toctree-l2"><a class="reference internal" href="#equality-vs-identity">Equality vs Identity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#range-length-looping">Range Length Looping</a></li>
<li class="toctree-l2"><a class="reference internal" href="#zip">Zip</a></li>
<li class="toctree-l2"><a class="reference internal" href="#timing-code">Timing code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#handling-signals">Handling Signals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#list-comprehension">List comprehension</a></li>
<li class="toctree-l2"><a class="reference internal" href="#iterator">Iterator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generator">Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pass-statement">Pass Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calling-c-functions-from-python">Calling C Functions from Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-paths">Working with Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pickle-saving-objects-to-files">Pickle - Saving objects to files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#environment-variables">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#named-tuple">Named Tuple</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-packages">Python Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#making-a-package">Making a package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#multithreading">Multithreading</a></li>
<li class="toctree-l2"><a class="reference internal" href="#decorators">Decorators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#decorate-functions">Decorate functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decorate-classes">Decorate classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#context-managers">Context Managers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exception-handling">Exception Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#virtual-environment">Virtual Environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="linux_commands.html">Linux Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="ssh.html">SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="bash.html">Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="jinja.html">🥷 Jinja</a></li>
<li class="toctree-l1"><a class="reference internal" href="mermaid.html">🧜‍♀️ Mermaid</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MyDocs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">🐍 Python</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/python.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="snake-python">
<h1>🐍 Python<a class="headerlink" href="#snake-python" title="Permalink to this heading"></a></h1>
<section id="lambda">
<h2>Lambda<a class="headerlink" href="#lambda" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><code class="code highlight python docutils literal highlight-python"><span class="k">lambda</span> <span class="o">&lt;</span><span class="n">arguments</span><span class="o">&gt;</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span></code>: Small anonymous function</p></li>
<li><p>Can only have one expression, can take multiple arguments</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span> <span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">10</span>
<span class="nb">print</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="c1"># Will output 11</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Can also be used inside another function</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">myfunc</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="k">return</span> <span class="k">lambda</span> <span class="n">a</span> <span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">n</span>

<span class="c1"># function to double input</span>
<span class="n">mydoubler</span> <span class="o">=</span> <span class="n">myfunc</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># function to triple input</span>
<span class="n">mytripler</span> <span class="o">=</span> <span class="n">myfunc</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mydoubler</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mytripler</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="map">
<h2>Map<a class="headerlink" href="#map" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><code class="code highlight python docutils literal highlight-python"><span class="nb">map</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="nb">iter</span><span class="p">)</span></code>: Applies func to each element of iterable</p></li>
<li><p>Returns a map object, need to covert to another type to view, e.g. list()</p></li>
<li><p>map object is an iterator - it doesn’t store the new data, just how to data is mapped, so when extracting a value it will map the value on the fly</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="mi">10</span>

<span class="c1"># prints [11, 12, 13]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])))</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Can also use with Lambda function</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span><span class="n">a</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])))</span>
</pre></div>
</div>
</section>
<section id="filter">
<h2>Filter<a class="headerlink" href="#filter" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><code class="code highlight python docutils literal highlight-python"><span class="nb">filter</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="nb">iter</span><span class="p">)</span></code>: Added each element of iterable to new iterable if func returns true</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">a</span> <span class="o">!=</span> <span class="mi">0</span>

<span class="c1"># prints [1, 2]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])))</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Also used with lambda</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span><span class="n">a</span><span class="o">!=</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])))</span>
</pre></div>
</div>
</section>
<section id="set">
<h2>Set<a class="headerlink" href="#set" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Set is a collection which is unordered, unchangable (can remove and add items still), and unindexed</p></li>
<li><p><code class="code highlight python docutils literal highlight-python"><span class="n">my_set</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="s2">&quot;cherry&quot;</span><span class="p">}</span></code></p></li>
<li><p>Sets cannot have duplicate entries - they will be ignored if there is a duplicate</p></li>
<li><p>Can also use the <code class="code highlight python docutils literal highlight-python"><span class="nb">set</span><span class="p">()</span></code> object: <code class="code highlight python docutils literal highlight-python"><span class="n">my_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">((</span><span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span></code></p></li>
</ul>
</section>
<section id="string-formatting">
<h2>String formatting<a class="headerlink" href="#string-formatting" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><code class="code highlight python docutils literal highlight-python"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello </span><span class="si">{</span><span class="n">my_string</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></code></p></li>
</ul>
</section>
<section id="checking-for-a-type">
<h2>Checking for a type<a class="headerlink" href="#checking-for-a-type" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Use <code class="code highlight python docutils literal highlight-python"><span class="nb">isinstance</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">class_type</span><span class="p">)</span></code></p></li>
<li><p>Don’t use <code class="code highlight python docutils literal highlight-python"><span class="o">==</span></code></p></li>
</ul>
</section>
<section id="equality-vs-identity">
<h2>Equality vs Identity<a class="headerlink" href="#equality-vs-identity" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><code class="code highlight python docutils literal highlight-python"><span class="ow">is</span></code> checks that two variables point to the same object in memory
- Use <code class="code highlight python docutils literal highlight-python"><span class="ow">is</span></code> when checking for <code class="code highlight python docutils literal highlight-python"><span class="kc">None</span> <span class="kc">True</span> <span class="kc">False</span></code> - <code class="code highlight python docutils literal highlight-python"><span class="k">if</span> <span class="n">my_var</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span></code></p></li>
<li><p><code class="code highlight python docutils literal highlight-python"><span class="o">==</span></code> or <code class="code highlight python docutils literal highlight-python"><span class="o">!=</span></code> check that the value of two objects are the same</p></li>
</ul>
</section>
<section id="range-length-looping">
<h2>Range Length Looping<a class="headerlink" href="#range-length-looping" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Better to NOT use something like <code class="code highlight python docutils literal highlight-python"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">))</span></code></p></li>
<li><p>Instead use <code class="code highlight python docutils literal highlight-python"><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span></code> or similar</p></li>
<li><p>If you need the index, you can use enumerate to get the element and the index at the same time:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
  <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="zip">
<h2>Zip<a class="headerlink" href="#zip" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Returns a zip object, which is an iterator of tuples</p></li>
<li><p>Each tuple contains the elements from the same index in the given input iterators</p></li>
<li><p>If given input iterators have different lengths, zip iterator will be of length of the shortest input iterator</p></li>
<li><p>Cannot be accessed with indexes so need to covert to a list or similar, or use in a loop</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;Charles&quot;</span><span class="p">,</span> <span class="s2">&quot;Mike&quot;</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Jenny&quot;</span><span class="p">,</span> <span class="s2">&quot;Christy&quot;</span><span class="p">,</span> <span class="s2">&quot;Monica&quot;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="k">for</span> <span class="n">av</span><span class="p">,</span> <span class="n">bv</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
  <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="timing-code">
<h2>Timing code<a class="headerlink" href="#timing-code" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Use <code class="code highlight python docutils literal highlight-python"><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span></code> to time code</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Use logging instead of print statements for debug</p></li>
<li><p>Can use different levels of log, and your own formatting</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_func</span><span class="p">():</span>
  <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;debug info&quot;</span><span class="p">)</span>
  <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;general info&quot;</span><span class="p">)</span>
  <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;not good&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="n">level</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span>
  <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;[</span><span class="si">%(levelname)s</span><span class="s1">] </span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(message)s</span><span class="s1">&#39;</span>
  <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>
</pre></div>
</div>
<p>Using the <cite>logging.basicConfig</cite> uses the root logger, which is fine for small applications,
but for larger projects it is better to use different loggers. This allows you to have multiple logging
configurations.</p>
<p>For each logging instance, you can specify to where the log is written. You can use <cite>FileHandler</cite> type to
specify that your log will be written to a file. You can use the <cite>StreamHandler</cite> to specify the log will be printed
to the console for example.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Setting up a new logger</span><a class="headerlink" href="#id1" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This will get the logger with the specified name, and create it if not already existing</span>
<span class="c1"># using __name__ is a convention to use the module name for the logger</span>
<span class="n">my_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Example setting a FileHandler</span><a class="headerlink" href="#id2" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">file_handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>
<span class="n">file_handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">file_handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">file_handler</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Example setting a StreamHandler</span><a class="headerlink" href="#id3" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sh</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="n">my_log_format</span><span class="p">)</span>

<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">sh</span><span class="p">)</span>
<span class="n">sh</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use the logging level <cite>exception</cite> if you want to print a stack trace with your log message</p>
</div>
</section>
<section id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
  <span class="o">...</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
  <span class="o">...</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Used to handle errors in pieces of code you think an error could occur in</p></li>
<li><p>Can use multiple except statements to catch different errors - put more generic ones like <code class="code highlight python docutils literal highlight-python"><span class="ne">Exception</span></code> towards the bottom</p></li>
<li><p>use the <code class="code highlight python docutils literal highlight-python"><span class="k">else</span></code> to run code if the try block finishes without raising and exception</p></li>
<li><p>use <code class="code highlight python docutils literal highlight-python"><span class="k">finally</span></code> to run if code is successful or if exception is thrown</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
  <span class="o">...</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
  <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Try succeeded&#39;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This always runs&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Raise your own exceptions: <code class="code highlight python docutils literal highlight-python"><span class="k">raise</span> <span class="ne">Exception</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyCustomError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
  <span class="k">pass</span>

<span class="k">try</span><span class="p">:</span>
  <span class="k">if</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">MyCustomError</span>
<span class="k">except</span> <span class="n">MyCustomError</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;My custom exception was triggered&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>It is also possible to catch an exception, run some code, then re-raise the exception:</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Example re-raising an exception</span><a class="headerlink" href="#id4" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
  <span class="k">raise</span> <span class="n">MyException</span>
<span class="k">except</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exception caught&quot;</span><span class="p">)</span>
  <span class="c1"># raise the exception again</span>
  <span class="k">raise</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When you don’t specify a specific exception in the <code class="docutils literal notranslate"><span class="pre">except</span></code> block, it will also catch
Keyboard interrupts like CTRL+C. You can specify to catch these with <code class="docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code></p>
</div>
<section id="handling-signals">
<h3>Handling Signals<a class="headerlink" href="#handling-signals" title="Permalink to this heading"></a></h3>
<p>You can set functions for handling specified signals in python:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Example setting a Signal Handler</span><a class="headerlink" href="#id5" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">signal</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">signal_handler</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You pressed Ctrl+C!&#39;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># register a signal handler here</span>
<span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="n">signal_handler</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Press Ctrl+C&#39;</span><span class="p">)</span>
<span class="c1"># thread is paused until a signal is recieved</span>
<span class="n">signal</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="list-comprehension">
<h2>List comprehension<a class="headerlink" href="#list-comprehension" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Create a new list where each element which passes a filter is altered by a function</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="c1"># For all elements in nums which are even, double them and put them in my_list</span>
<span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">nums</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1"># my_list = [4, 8]</span>
</pre></div>
</div>
</section>
<section id="iterator">
<h2>Iterator<a class="headerlink" href="#iterator" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>e.g. <code class="code highlight python docutils literal highlight-python"><span class="nb">map</span><span class="p">()</span></code></p></li>
<li><p>A type that allows iteration but doesn’t store any raw data</p></li>
<li><p>Iterator stores where in sequence you are:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>

<span class="c1"># can also use y.__next__()</span>
<span class="nb">next</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># This loop will start at second iteration of y .i.e. 2*2 = 4</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">y</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>use <code class="code highlight python docutils literal highlight-python"><span class="nb">iter</span><span class="p">()</span></code> to make an iterator e.g.: <code class="code highlight python docutils literal highlight-python"><span class="n">x</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span></code></p></li>
<li><p>Exception <code class="code highlight python docutils literal highlight-python"><span class="n">StopIterator</span></code> will stop an interator - how a for loop stops for example</p></li>
</ul>
</section>
<section id="generator">
<h2>Generator<a class="headerlink" href="#generator" title="Permalink to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generator</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="c1"># pauses function and returns i to the calling function</span>
    <span class="k">yield</span> <span class="n">i</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Yield pauses function, saves context of function, uses the value, then comes back to continue the function</p></li>
<li><p>Could also implement like this, remembering yield pauses then continues</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gen</span><span class="p">():</span>
  <span class="k">yield</span> <span class="mi">1</span>
  <span class="k">yield</span> <span class="mi">2</span>
  <span class="k">yield</span> <span class="mi">3</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">():</span>
  <span class="c1"># prints 1, 2, 3</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Can also use generator comprehensions</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gen</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">:</span>
  <span class="c1"># prints 1, 3, 5, 7, 9</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pass-statement">
<h2>Pass Statement<a class="headerlink" href="#pass-statement" title="Permalink to this heading"></a></h2>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">pass</span></code> keyword for avoiding errors on code you have not yet written</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
  <span class="c1"># TODO</span>
  <span class="k">pass</span>
</pre></div>
</div>
</section>
<section id="calling-c-functions-from-python">
<h2>Calling C Functions from Python<a class="headerlink" href="#calling-c-functions-from-python" title="Permalink to this heading"></a></h2>
<p>You can use the python <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> module to convert data types between C and python</p>
<p>To call C from python, you have to load the shared library into python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ctypes</span>

<span class="c1"># Load the shared library</span>
<span class="n">my_lib</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">CDLL</span><span class="p">(</span><span class="s1">&#39;./libmy_lib.so&#39;</span><span class="p">)</span>

<span class="c1"># Define the function arguments and return type</span>
<span class="n">my_lib</span><span class="o">.</span><span class="n">add_numbers</span><span class="o">.</span><span class="n">argtypes</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint32</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint32</span><span class="p">]</span>
<span class="n">my_lib</span><span class="o">.</span><span class="n">add_numbers</span><span class="o">.</span><span class="n">restype</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint32</span>

<span class="c1"># Call the function</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">my_lib</span><span class="o">.</span><span class="n">add_numbers</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">67</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Result:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p>You also have to define the python representations of the c types for the
arguments and return value, which can be done using <code class="docutils literal notranslate"><span class="pre">ctypes</span></code></p>
</section>
<section id="working-with-paths">
<h2>Working with Paths<a class="headerlink" href="#working-with-paths" title="Permalink to this heading"></a></h2>
<p>When working with paths, it is neat to use <code class="docutils literal notranslate"><span class="pre">pathlib</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">my_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;&lt;path_to_file&gt;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can do a lot of useful things once your file is in a Path object:</p>
<ul class="simple">
<li><p>Get current working directory (the dir the python script is called from): <code class="code highlight python docutils literal highlight-python"><span class="n">my_file</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span></code></p></li>
<li><p>Join paths: <code class="code highlight python docutils literal highlight-python"><span class="n">my_file</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s1">&#39;&lt;another path&gt;&#39;</span><span class="p">)</span></code></p></li>
<li><p>chmod: <code class="code highlight python docutils literal highlight-python"><span class="n">my_file</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_file</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_mode</span> <span class="o">|</span> <span class="mo">0o111</span><span class="p">)</span></code> -&gt; equivilent to <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span></code></p></li>
<li><p>Exists: <code class="code highlight python docutils literal highlight-python"><span class="n">my_file</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span></code></p></li>
<li><p>Get filepath of current python module: <code class="code highlight python docutils literal highlight-python"><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span></code></p></li>
<li><p>Get directory path of current python module: <code class="code highlight python docutils literal highlight-python"><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span></code></p></li>
</ul>
</section>
<section id="pickle-saving-objects-to-files">
<h2>Pickle - Saving objects to files<a class="headerlink" href="#pickle-saving-objects-to-files" title="Permalink to this heading"></a></h2>
<p>You can dump an object’s value to a file so it can be stored in non-volatile memory.
Maybe you want to save some things but don’t have enough RAM to store everything at once</p>
<p>Objects need to be written in a binary format:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Example storing an object to memory and retreiving it</span><a class="headerlink" href="#id6" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>

<span class="n">my_var</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>

<span class="c1"># notice write-binary</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;my_python_vars.file&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">my_var</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">pickle</span><span class="o">.</span><span class="n">HIGHEST_PROTOCOL</span><span class="p">)</span>

<span class="k">del</span> <span class="n">my_var</span>

<span class="c1"># notice read-binary</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;my_python_vars.file&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>

    <span class="n">my_other_var</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;my_other_var is </span><span class="si">{</span><span class="n">my_other_var</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="environment-variables">
<h2>Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this heading"></a></h2>
<p>You can use environment variables inside your python script.
This allows you to access variables which you might want to keep out of your
source code for example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># os.environ returns a dictionary of your environment variables</span>
<span class="n">user_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MY_USER_NAME&#39;</span><span class="p">)</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MY_PASSWORD&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="named-tuple">
<h2>Named Tuple<a class="headerlink" href="#named-tuple" title="Permalink to this heading"></a></h2>
<p>A named tuple allows you to use a tuple but read the elements in that tuple by name.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Example using named tuple</span><a class="headerlink" href="#id7" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>

<span class="n">Color</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Color&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">])</span>

<span class="n">my_color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">red</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">green</span><span class="o">=</span><span class="mi">143</span><span class="p">,</span> <span class="n">blue</span><span class="o">=</span><span class="mi">78</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">my_color</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember tuples are immutable so you can’t write to these elements</p>
</div>
</section>
<section id="python-packages">
<h2>Python Packages<a class="headerlink" href="#python-packages" title="Permalink to this heading"></a></h2>
<p>A python module is simply a single <code class="docutils literal notranslate"><span class="pre">.py</span></code> file.
They can be imported with the <code class="docutils literal notranslate"><span class="pre">import</span></code> statement.</p>
<p>A package is a set of python modules with related functionality. These modules are
organised in a directory hierachry. It organises modules in a single namespace.</p>
<p>Packages can be imported with a package manager like <code class="docutils literal notranslate"><span class="pre">pip</span></code>.
Each package must also contain a <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file.</p>
<p>Using a python package has an advantage in the python will add that directory to the
PATH search so it is easier to specify imports etc.</p>
<p>You can also declare package wide constants/vairables in the <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file.</p>
<section id="making-a-package">
<h3>Making a package<a class="headerlink" href="#making-a-package" title="Permalink to this heading"></a></h3>
<p>A more recent way to package a project is to use a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file.
You will want your directory structure to look something like this:</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Example folder structure</span><a class="headerlink" href="#id8" title="Permalink to this code"></a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
├── &lt;package_name&gt;
│   ├── __init__.py
│   ├── libraries
│   │   └── library_one.py
│   ├── module_one.py
│   └── module_two.py
└── pyproject.toml
</pre></div>
</div>
</div>
<p>In your pyproject.toml you’ll want something like this:</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Example pyproject.toml</span><a class="headerlink" href="#id9" title="Permalink to this code"></a></div>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;setuptools&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;setuptools-scm&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;setuptools.build_meta&quot;</span>

<span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot; &lt;package name&gt; &quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot; &lt;package version&gt; &quot;</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot; &lt;description&gt; &quot;</span>
<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CLOSED&quot;</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>Inside your <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file, you’ll want to include the types that you want immediately accessable in
your package. This basically runs when you first import your package into your current project.</p>
<p>Once you have setup your project, you can run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code> in the same dir as your
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file. It seems this is a better result than <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code>. It might also be
smart to do this in your project’s virtual environment. You can also use the <code class="docutils literal notranslate"><span class="pre">-e</span></code> flag to keep the
package editable so you can use it and edit it at the same time.</p>
</section>
</section>
<section id="multithreading">
<h2>Multithreading<a class="headerlink" href="#multithreading" title="Permalink to this heading"></a></h2>
<p>Python has a global interpreter lock (GIL), which means that it is all run in one thread. This is one
of the reasons it is slow since it can only make use of one thread.</p>
<p>Mutlithreading in python allows to create mutliple threads. These threads still run on the same
interpreter and the GIL still applies. However, using mutlithreading allows the interpreter to better
manage execution time.</p>
<p>For example, if one thread is waiting for an IO operation to complete or is sleeping, then it makes sense
for the interpreter to do other tasks while this is happening.</p>
<p>Mutliprocessing in python is different and this is where a new interpreter and memory space is spawned for
each new process you make.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Example of a multi-threaded program</span><a class="headerlink" href="#id10" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">func_1</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">func_2</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">func_1</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">func_2</span><span class="p">)</span>

<span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># join pauses execution here until the specified thread is complete</span>
<span class="n">t1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finish&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If an exception is raised in a thread, it is not propogated back to the main thread, so you
need to consider how to deal with exceptions happening inside a thread you have spawned.</p>
</div>
<p>Obviously, mutliple threads accessing the same resource at a time could cause issues.
Threading provides a mutex lock to allow resources to be used only by one thread at a time</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Example using mutex lock</span><a class="headerlink" href="#id11" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">threading</span>

<span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>

<span class="c1"># wait for lock to be availble and aquire it</span>
<span class="n">lock</span><span class="o">.</span><span class="n">aquire</span><span class="p">()</span>

<span class="c1"># ... shared resource code goes here</span>

<span class="c1"># allow the resource to be used by other threads</span>
<span class="n">lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

<span class="c1"># you can also make this easier by using the with statement</span>
<span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
  <span class="c1"># ... shared resource code goes here</span>

<span class="c1"># automatically released</span>
</pre></div>
</div>
</div>
</section>
<section id="decorators">
<h2>Decorators<a class="headerlink" href="#decorators" title="Permalink to this heading"></a></h2>
<p>Decorators change the behaviour of a function without changing the function itself.</p>
<p>Decorators utilise a few concepts:</p>
<ol class="arabic simple">
<li><p>A function is an object in python, therefore it can be assigned to a variable.</p></li>
<li><p>A function can be nested within another function.</p></li>
<li><p>A function can be passed as an argument to another function.</p></li>
</ol>
<section id="decorate-functions">
<h3>Decorate functions<a class="headerlink" href="#decorate-functions" title="Permalink to this heading"></a></h3>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Example using a custom decorator function</span><a class="headerlink" href="#id12" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>

  <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">*</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1"># Do something before the function</span>
    <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">*</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Do something after the function</span>

  <span class="k">return</span> <span class="n">wrapper</span>


<span class="nd">@my_decorator</span>
<span class="k">def</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">my_arg</span><span class="p">):</span>

  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">my_arg</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The above example shows the use of a custom decorator, which is able to pass on the
given arguments.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">*args</span></code> refers to an unlimited number of arguments such as <code class="docutils literal notranslate"><span class="pre">10</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">'hello'</span></code>.
<code class="docutils literal notranslate"><span class="pre">*kwargs</span></code> refers to an unlimited number of keyword arguments such as <code class="docutils literal notranslate"><span class="pre">number=10</span></code>, <code class="docutils literal notranslate"><span class="pre">success=True</span></code> or <code class="docutils literal notranslate"><span class="pre">my_string='hello'</span></code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Decorators hide the function they are decorating, so if you want to get the correct features sich as <code class="docutils literal notranslate"><span class="pre">__name</span></code>
you can use <code class="code highlight python docutils literal highlight-python"><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span></code> and decorate your wrapper function with <code class="code highlight python docutils literal highlight-python"><span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>
where <code class="docutils literal notranslate"><span class="pre">func</span></code> is the function you are wrapping.</p>
</div>
</section>
<section id="decorate-classes">
<h3>Decorate classes<a class="headerlink" href="#decorate-classes" title="Permalink to this heading"></a></h3>
<p>It is also possible use classes to decorate a function too.</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Example using a Class decorator. <a class="reference external" href="https://www.freecodecamp.org/news/python-decorators-explained-with-examples/">Source</a></span><a class="headerlink" href="#id13" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LimitQuery</span><span class="p">:</span>

  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="n">func</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

  <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit</span><span class="p">:</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
          <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No queries left. All </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="si">}</span><span class="s1"> queries used.&#39;</span><span class="p">)</span>
          <span class="k">return</span>

<span class="nd">@LimitQuery</span>
<span class="k">def</span> <span class="nf">get_coin_price</span><span class="p">(</span><span class="n">limit</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;View the Bitcoin Price Index (BPI)&#39;&#39;&#39;</span>

    <span class="n">url</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://api.coindesk.com/v1/bpi/currentprice.json&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;$</span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="s1">&#39;bpi&#39;</span><span class="p">][</span><span class="s1">&#39;USD&#39;</span><span class="p">][</span><span class="s1">&#39;rate_float&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">get_coin_price</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_coin_price</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_coin_price</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_coin_price</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_coin_price</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_coin_price</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Output</span><a class="headerlink" href="#id14" title="Permalink to this code"></a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$35968.25
$35896.55
$34368.14
$35962.27
$34058.26
No queries left. All 5 queries used.
</pre></div>
</div>
</div>
<p>In the example you see using the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method when the function is called and the class created.</p>
</section>
</section>
<section id="context-managers">
<h2>Context Managers<a class="headerlink" href="#context-managers" title="Permalink to this heading"></a></h2>
<p>Context managers let you use an object within a <code class="docutils literal notranslate"><span class="pre">with</span></code> statement.
When it is in a <code class="docutils literal notranslate"><span class="pre">with</span></code> statement, it will call the <code class="docutils literal notranslate"><span class="pre">__enter__</span></code> method. At the end it will call
the <code class="docutils literal notranslate"><span class="pre">__exit__</span></code> method.</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">Example using context manager</span><a class="headerlink" href="#id15" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>

  <span class="c1"># called when object is created</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>

  <span class="c1"># called when used in context manager</span>
  <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>

  <span class="c1"># called when used in context manager</span>
  <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>

  <span class="c1"># called when object is destroyed</span>
  <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>

  <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>

<span class="c1"># __init__</span>
<span class="k">with</span> <span class="n">MyClass</span><span class="p">()</span> <span class="k">as</span> <span class="n">myobject</span><span class="p">:</span>
  <span class="c1"># __enter__</span>
  <span class="n">myobject</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>
  <span class="c1"># __exit__</span>
<span class="c1"># __del__</span>

<span class="c1"># __init__</span>
<span class="n">myobject</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>

<span class="k">with</span> <span class="n">myobject</span><span class="p">:</span>
  <span class="c1"># __enter__</span>
  <span class="n">myobject</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>
  <span class="c1"># __exit__</span>

<span class="c1"># myobject still exists here (not out of scope)</span>
</pre></div>
</div>
</div>
<section id="exception-handling">
<h3>Exception Handling<a class="headerlink" href="#exception-handling" title="Permalink to this heading"></a></h3>
<p>You can handle exceptions that occur within the context in the <code class="docutils literal notranslate"><span class="pre">__exit__</span></code> method.
Information about the exception will be passed to the method. If it returns <code class="docutils literal notranslate"><span class="pre">True</span></code>, then
the exception is considered handled and is not propogated further. If <code class="docutils literal notranslate"><span class="pre">__exit__</span></code> returns <code class="docutils literal notranslate"><span class="pre">False</span></code>,
then the exception is propogated outside the context block.</p>
</section>
</section>
<section id="virtual-environment">
<h2>Virtual Environment<a class="headerlink" href="#virtual-environment" title="Permalink to this heading"></a></h2>
<p>Python has a way to separate your environments for different projects. This is handy
if you want to install different packages only for a certain project for example.</p>
<p>To start a virtual environment, call <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-m</span> <span class="pre">venv</span> <span class="pre">&lt;path</span> <span class="pre">to</span> <span class="pre">venv</span> <span class="pre">(.venv)&gt;</span></code>
To activate the virtual environment, call <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">.venv/bin/activate</span></code>
Activating will add a keyword <code class="docutils literal notranslate"><span class="pre">deactivate</span></code>, which you can use to leave the environment.</p>
<p>Inside the environment you can do <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> to install packages to your local environment.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="systemd.html" class="btn btn-neutral float-left" title="SystemD" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="linux_commands.html" class="btn btn-neutral float-right" title="Linux Commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Mikkel Caschetto-Bottcher.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>